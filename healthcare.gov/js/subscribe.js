var locale=$("html").attr("lang"),completeTitle="",chooseTitle="";if(locale=="es"){completeTitle="¡GRACIAS!",chooseTitle="¿Qué tipo de actualizaciones quisiera recibir?"}else{completeTitle="Thanks!",chooseTitle="What would you like to get updates about?"}function selectState(state){$("select.state option").filter(function(){return $(this).text()===state}).attr("selected",true)}$("select.state").change(function(){var stateStr=$("option:selected",this).text();selectState(stateStr)});var isMobile={any:function(){return $(window).width()<=599}};var isMobileDevice={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobileDevice.Android()||isMobileDevice.BlackBerry()||isMobileDevice.iOS()||isMobileDevice.Opera()||isMobileDevice.Windows()}};$(function(){if("ontouchstart"in document.documentElement){$("body").removeClass("no-touch")}if(isMobileDevice.any()){$(".btn-grey.print").remove()}if(!isMobile.any()){$("form .signup").removeAttr("href").attr("data-toggle","modal").attr("data-target","#subscribe-modal");$(".g-plus").attr("data-width","272")}else{$(".g-plus").attr("data-width","100");$(".g-plus").attr("data-height","131")}});$("a.valid").hide();$("input.modal-submit").hide();var SubscribeValidation=function(formID){var expose={},_formArray=document.forms[formID],_hashID="#"+formID,_hide="hide",_borderClass="errorBorder",_errorContainerSelector=".error-msg",_ariaHidden="aria-hidden",_errorNumber=".errorNumber",_errorTitle="#error-title",_errorTitle2="#error-title-screen2",_true="true",_false="false";_isEmail=function(email){var regex=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email)};_isNumber=function(number){var regex=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;return regex.test(number)};_stateError=function(){var state=$(_hashID+" select").val();return _.isEmpty(state)};_emailNumber=function(){var email=_formArray["e"].value;var number=_formArray["w"]?_formArray["w"].value:"";return{emailEmpty:function(){return _.isEmpty(email)},numberEmpty:function(){return _.isEmpty(number)},invalidEmail:function(){if(email!==""){if(!_isEmail(email)){return true}}},invalidNumber:function(){if(number!==""){if(!_isNumber(number)){return true}}}}};_checkboxError=function(){var checkboxArray=_formArray["t[]"],checkbox=checkboxArray[0].checked||checkboxArray[1].checked||checkboxArray[2].checked;return checkbox===false};_defineFormInputErrors=function(){var defaultValues=[{id:"invalid-state",hidden:true,type:"subscribe-state"},{id:"invalid-email",hidden:true,type:"subscribe-email"},{id:"invalid-number",hidden:true,type:"subscribe-number"},{id:"blank-email",hidden:true,type:"subscribe-email",blank:true},{id:"blank-number",hidden:true,type:"subscribe-number",blank:true},{id:"blank-campaign",hidden:true,type:"subscribe-email",blank:true}];if(_stateError()){defaultValues[0].hidden=false}if(_emailNumber().invalidEmail()){defaultValues[1].hidden=false;defaultValues[3].blank=false}if(formID!=="subscribe-form-campaign"&&_emailNumber().invalidNumber()){defaultValues[2].hidden=false;defaultValues[4].blank=false}if(formID!=="subscribe-form-campaign"&&_emailNumber().emailEmpty()&&_emailNumber().numberEmpty()){defaultValues[3].hidden=false;defaultValues[4].hidden=false}if(formID==="subscribe-form-campaign"&&_emailNumber().emailEmpty()){defaultValues[5].hidden=false}return defaultValues};_defineCheckboxesError=function(){var defaultValue={id:"invalid-checkbox",hidden:true};if(_checkboxError()){defaultValue.hidden=false}return defaultValue};_hasClass=function(arg1,arg2){return $(arg1).hasClass(arg2)};_ariaHiddenToggle=function(arg1,arg2,arg3){return $(arg1).attr(arg2,arg3)};expose.validateForm=function(){var errors=_defineFormInputErrors(),trackfalse=[];for(var i=0,n=errors.length-1;i<=n;i+=1){var selector=_hashID+" ."+errors[i].id,errorId=errors[i].id+"-id",classCheck=errors[i].hidden,formElementSelector;if(_.has(errors[i],"blank")){if(errors[i].blank===false){formElementSelector=undefined}else{formElementSelector="."+errors[i].type}}else{formElementSelector="."+errors[i].type}if(classCheck){if(!_hasClass(selector,_hide)){$(selector).addClass(_hide)}if(_hasClass(formElementSelector,_borderClass)){$(formElementSelector).removeClass(_borderClass);$(formElementSelector).removeAttr("aria-describedby")}_ariaHiddenToggle(selector,_ariaHidden,_true)}else{trackfalse.push(errors[i].id);if(_hasClass(selector,_hide)){$(selector).removeClass(_hide)}if(!_hasClass(formElementSelector,_borderClass)){$(formElementSelector).addClass(_borderClass)}if(_hasClass(_errorContainerSelector,_hide)){$(_errorContainerSelector).removeClass(_hide);$(".error-msg").attr("aria-hidden","false")}$(formElementSelector).attr("aria-describedby",errorId);if(trackfalse.length>0){var trackfalselength=trackfalse.length;$(_errorNumber).text(trackfalselength)}$(_errorTitle).focus();_ariaHiddenToggle(selector,_ariaHidden,_false)}}if(_.isEmpty(trackfalse)){if(!_hasClass(_errorContainerSelector,_hide)){$(_errorContainerSelector).addClass(_hide)}$(_errorNumber).text(" ");return true}};expose.validateCheckboxes=function(){var error=_defineCheckboxesError(),selector=_hashID+" ."+error.id,classCheck=error.hidden,trackfalselength=1;if(classCheck){if(!_hasClass(selector,_hide)){$(selector).addClass(_hide)}if(!_hasClass(_errorContainerSelector,_hide)){$(_errorContainerSelector).addClass(_hide)}return true}else{if(_hasClass(selector,_hide)){$(selector).removeClass(_hide)}if(_hasClass(_errorContainerSelector,_hide)){$(_errorContainerSelector).removeClass(_hide);$(".error-msg").attr("aria-hidden","false")}$(_errorNumber).text(trackfalselength);$(_errorTitle2).focus();_ariaHiddenToggle(selector,_ariaHidden,_false)}};return expose};function continueForm(formID){var validation=new SubscribeValidation(formID);if(validation.validateForm()===true){$("#screen1").addClass("hidden");$("#screen3").removeClass("hidden");$("[id*=subscribe-form] input.continue").hide();$("[id*=subscribe-form] input.modal-submit").show();$("h1#modal-nams").text(chooseTitle);$('#screen3 input[type="checkbox"]:first').focus()}else{return false}}function submitForm(event,formID){var validation=new SubscribeValidation(formID);if(formID!=="subscribe-form-campaign"&&validation.validateForm()===true&&validation.validateCheckboxes()===true||formID==="subscribe-form-campaign"&&validation.validateForm()===true){var values={},key1="BpbEyi2zDJAVbeyHJ11vzg1GETQHU6yj",key2="gs2wYNwY8VvAsYcW1RB12CwovPgx3TWB",url="https://api.govdelivery.com/api/add_script_subscription",that=event.target;$.each($(that).serializeArray(),function(i,field){if(field.value.length>0){if(field.name==="t[]"){values[field.name]=values[field.name]||[];values[field.name].push(field.value)}else values[field.name]=field.value}});switch($("#key").val()){case"1":values["k"]=key1;break;case"2":values["k"]=key2;break}$("input[type=submit]",that).attr("disabled","disabled");$.ajax({url:url,data:values,dataType:"jsonp",jsonp:"c",success:function(){if($("input#redirect").val()&&$("input#redirect").val().length>0){window.location=$("input#redirect").val();return}$("#screen3").addClass("hidden");$("#screen1").addClass("hidden");$("#screen2").removeClass("hidden");$("[id*=subscribe-form] a.valid").show();$("[id*=subscribe-form] input.valid").hide();$("h1#modal-nams").text(completeTitle);$(".btn.btn-md.btn-green.next.col-sm-3.pull-right.valid").focus()}})}else{return false}}$("input.continue").click(function(event){continueForm($(this).closest("form").attr("id"));event.preventDefault()});$("[id*=subscribe-form]").submit(function(event){submitForm(event,$(this).attr("id"));event.preventDefault()});$(function(){$("#subscribe-modal").on("shown.bs.modal",function(e){$("#modal-state-dropdown").focus()}).on("hidden.bs.modal",function(e){$(".btn.btn-default.up-case").focus()});$("#updates-subscribe form").submit(function(e){e.preventDefault();$("#address").val($("input[data-email]").val())})});(function(){var focusableElementsString="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function trapEscapeKey(obj,evt){if(evt.which==27){var o=obj.find("*");var cancelElement;cancelElement=o.filter("#cancel");cancelElement.click();evt.preventDefault()}}function trapTabKey(obj,evt){if(evt.which==9){var o=obj.find("*");var focusableItems=o.filter(focusableElementsString).filter(":visible");var focusedItem=jQuery(":focus");var numberOfFocusableItems=focusableItems.length;var focusedItemIndex=focusableItems.index(focusedItem);if(evt.shiftKey){if(focusedItemIndex==0){focusableItems.get(numberOfFocusableItems-1).focus();evt.preventDefault()}}else{if(focusedItemIndex==numberOfFocusableItems-1){focusableItems.get(0).focus();evt.preventDefault()}}}}$(function(){$("#subscribe-form-modal").keydown(function(event){trapTabKey($(this),event)});$("#subscribe-form-modal").keydown(function(event){trapEscapeKey($(this),event)})})})();(function(){function getInputHandler(inputCallback){return function(event){if(event.target.type.toUpperCase()==="RADIO"){var radioGroup=document.getElementsByName(event.target.name);for(i=0;i<radioGroup.length;i++){radioGroup[i].setCustomValidity("")}}else{event.target.setCustomValidity("")}if(inputCallback){inputCallback(event)}event.target.checkValidity()}}function getInvalidHandler(invalidCallback){return function(event){var element=event.target;var validity=element.validity;var suffix=validity.valueMissing?"value-missing":validity.typeMismatch?"type-mismatch":validity.patternMismatch?"pattern-mismatch":validity.tooLong?"too-long":validity.rangeUnderflow?"range-underflow":validity.rangeOverflow?"range-overflow":validity.stepMismatch?"step-mismatch":validity.customError?"custom-error":"";var specificErrormessage,genericErrormessage;if(suffix&&(specificErrormessage=element.getAttribute("data-errormessage-"+suffix))){element.setCustomValidity(specificErrormessage)}else if(genericErrormessage=element.getAttribute("data-errormessage")){element.setCustomValidity(genericErrormessage)}else{element.setCustomValidity(element.validationMessage)}if(invalidCallback){invalidCallback(event)}}}var civem=function(){var formElements=[];var inputElements=document.getElementsByTagName("input");var i;for(i=0;i<inputElements.length;i++){formElements.push(inputElements[i])}var textareaElements=document.getElementsByTagName("textarea");for(i=0;i<textareaElements.length;i++){formElements.push(textareaElements[i])}var selectElements=document.getElementsByTagName("select");for(i=0;i<selectElements.length;i++){formElements.push(selectElements[i])}for(i=0;i<formElements.length;i++){var formElement=formElements[i];if(!formElement.willValidate){continue}if(formElement.tagName.toUpperCase()==="SELECT"||formElement.type.toUpperCase()==="RADIO"||formElement.type.toUpperCase()==="CHECKBOX"){formElement.onchange=getInputHandler(formElement.onchange)}else{formElement.oninput=getInputHandler(formElement.oninput)}formElement.oninvalid=getInvalidHandler(formElement.oninvalid)}};if(window.addEventListener){window.addEventListener("load",civem,false)}else if(window.attachEvent){window.attachEvent("onload",civem)}})();